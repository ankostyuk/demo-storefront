= Руководство по установке ПО «Storefront» =

== Расположение конфигуационных файлов ==
Конфигурирование ПО осуществляется путем правки нескольких конфигурационных
файлов. Конфигурационные файлы расположены в каталоге WEB-INF/conf
Список конфигурационных файлов:
    * jdbc.properties - файл настройки свойств соединения с БД
    * main.properties - файл настройки содержащий основные настройки ПО
    * image.properties - файл настройки правил преобразования загружаемых
      изображений
    * javamail.properties - файл настройки дополнительных свойств отправки почты
    * cdn.xml - файл настройки правил формирования URL к статическим и
      динамическим ресурсам.
    
== Создание схемы БД ==
Настройки подключения к БД указаны в файле jdbc.properties.
Для создания схемы в БД необходимо:
    * перейти в папку db/postgres/bin
    * отредактировать файл variables.py
    * в домашнем каталоге создать файл .pgpass (см. man psql)
      в файле должны содержаться пароли для пользователей "username" и "schema" указанных в variables.py
      пример содержимого файла ~/.pgpass
            127.0.0.1:5432:*:postgres:postgres
            127.0.0.1:5432:*:storefront:storefront
    * для пересоздания схемы выполнить скрипт reset_schema.py
    * для обновления схемы выполнить скрипт update_schema.py
    * (опционально) для загрузки тестовых данных выполнить скрипт insert_test_data.py
    * (опционально) для просмотра статистики по базе выполнить скрипт statistics.sh

== Настройка пути к инструментарию обработки изображений ==
Путь к инструментарию указывается в файле image.properties установкой значения
свойства image.tool.path. По-умолчанию значение равно '/usr/bin'.

== Настройка файлового репозитария ==
Перед первым запуском ПО необходимо создать каталог для хранения файлов. Путь к
каталогу указывается в файле main.properties свойством repository.root.
По-умолчанию значение равно '/tmp'.
!!! ВАЖНО: На платформе Windows не использовать путь содержащий в себе кириллицу

== Настройка репозитария индексов Lucene ==
Перед первым запуском ПО необходимо создать каталог(и) для хранения индексов Lucene.
Путь к каталогу(ам) указывается в файле main.properties свойствами:
    * lucene.index.catalog.path - каталог индекса поиска в каталоге
    * lucene.index.company.path - каталог индекса поиска в компаниях-поставщиках

